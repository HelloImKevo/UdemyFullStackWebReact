<%- include('partials/header') %>
<%- include('partials/nav') %>

<div class="container">
  <!-- Hero Section -->
  <section class="hero">
    <h1 class="hero-title">Welcome to My Blog</h1>
    <p class="hero-subtitle">Discover stories, insights, and ideas from passionate writers</p>
  </section>
  
  <!-- Posts Section -->
  <section class="posts-section">
    <% if (posts.length === 0) { %>
      <div class="empty-state">
        <i class="fas fa-pen-fancy"></i>
        <h2>No posts yet</h2>
        <p>Start sharing your thoughts by creating your first blog post!</p>
        <a href="/new" class="btn-primary btn-large">
          <i class="fas fa-plus"></i> Create Your First Post
        </a>
      </div>
    <% } else { %>
      <div class="posts-header">
        <h2><i class="fas fa-newspaper"></i> Latest Posts</h2>
        <span class="post-count"><%= posts.length %> <%= posts.length === 1 ? 'post' : 'posts' %></span>
      </div>
      
      <div class="posts-grid">
        <% posts.forEach(post => { %>
          <article class="post-card">
            <div class="post-card-header">
              <h3 class="post-card-title">
                <a href="/posts/<%= post.id %>"><%= post.title %></a>
              </h3>
              <div class="post-card-meta">
                <span class="post-author">
                  <i class="fas fa-user"></i> <%= post.author %>
                </span>
                <span class="post-date">
                  <i class="fas fa-calendar"></i> <%= formatDate(post.createdAt) %>
                </span>
              </div>
            </div>
            
            <div class="post-card-content">
              <p><%= createExcerpt(post.content, 200) %></p>
            </div>
            
            <div class="post-card-footer">
              <a href="/posts/<%= post.id %>" class="btn-secondary btn-small">
                <i class="fas fa-book-open"></i> Read More
              </a>
              <div class="post-actions">
                <a href="/posts/<%= post.id %>/edit" class="btn-icon" title="Edit post">
                  <i class="fas fa-edit"></i>
                </a>
                <form action="/posts/<%= post.id %>/delete" method="POST" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this post? This action cannot be undone.');">
                  <button type="submit" class="btn-icon btn-danger" title="Delete post">
                    <i class="fas fa-trash"></i>
                  </button>
                </form>
              </div>
            </div>
          </article>
        <% }) %>
      </div>
    <% } %>
  </section>
</div>

<%- include('partials/footer') %>
