<%- include('partials/header') %>

<div class="page-header">
    <h1><i class="fas fa-search"></i> Search Results</h1>
    <p class="page-description">Results for: "<%= query %>"</p>
</div>

<% if (results && results.length > 0) { %>
    <div class="stats-summary">
        <div class="summary-item">
            <i class="fas fa-list"></i>
            <span class="summary-number"><%= results.length %></span>
            <span class="summary-label">Results Found</span>
        </div>
    </div>

    <div class="search-results-list">
        <% results.forEach(result => { %>
            <div class="search-result-card">
                <div class="result-avatar">
                    <% if (result.avatarfull) { %>
                        <img src="<%= result.avatarfull %>" alt="<%= result.personaname %> avatar">
                    <% } else { %>
                        <i class="fas fa-user fa-3x"></i>
                    <% } %>
                </div>
                <div class="result-info">
                    <h3><%= result.personaname %></h3>
                    <% if (result.last_match_time) { %>
                        <p class="result-meta">
                            <i class="fas fa-clock"></i> Last match: <%= formatDate(result.last_match_time) %>
                        </p>
                    <% } %>
                    <% if (result.similarity !== undefined) { %>
                        <p class="result-similarity">Match score: <%= (result.similarity * 100).toFixed(0) %>%</p>
                    <% } %>
                </div>
                <div class="result-actions">
                    <a href="/player/<%= result.account_id %>" class="btn btn-small btn-primary">
                        <i class="fas fa-eye"></i> View Profile
                    </a>
                </div>
            </div>
        <% }); %>
    </div>
<% } else { %>
    <div class="empty-state">
        <i class="fas fa-search"></i>
        <h2>No Results Found</h2>
        <p>No players found matching "<%= query %>". Try a different search term.</p>
        <a href="/" class="btn btn-primary">Return Home</a>
    </div>
<% } %>

<%- include('partials/footer') %>
